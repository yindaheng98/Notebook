# 3D Gaussian Splatting

## Splatting

æŠ›é›ªçƒç®—æ³•çš„è‹±æ–‡åç§°ä¸ºSplattingæ–¹æ³•ï¼Œä¹Ÿç§°ä¸ºè¶³è¿¹æ³•ï¼ˆFootprintï¼‰ï¼Œå®ƒä¸å…‰çº¿æŠ•å°„æ³•ä¸åŒï¼Œæ˜¯åå¤å¯¹ä½“ç´ çš„æŠ•å½±å åŠ æ•ˆæœè¿›è¡Œè¿ç®—ã€‚å®ƒç”¨ä¸€ä¸ªç§°ä¸ºè¶³è¿¹çš„å‡½æ•°è®¡ç®—æ¯ä¸€ä½“ç´ æŠ•å½±çš„å½±å“èŒƒå›´ï¼Œç”¨é«˜æ–¯å‡½æ•°å®šä¹‰ç‚¹æˆ–è€…å°åŒºåŸŸåƒç´ çš„å¼ºåº¦åˆ†å¸ƒï¼Œä»è€Œè®¡ç®—å‡ºå…¶å¯¹å›¾åƒçš„æ€»ä½“è´¡çŒ®ï¼Œå¹¶åŠ ä»¥åˆæˆï¼Œå½¢æˆæœ€åçš„å›¾åƒã€‚ç”±äºè¿™ä¸ªæ–¹æ³•æ¨¡ä»¿äº†é›ªçƒè¢«æŠ›åˆ°å¢™å£ä¸Šæ‰€ç•™ä¸‹çš„ä¸€ä¸ªæ‰©æ•£çŠ¶ç—•è¿¹çš„ç°è±¡ï¼Œå› è€Œå–åä¸ºâ€œæŠ›é›ªçƒæ³•â€ã€‚

## å¦‚ä½•è¡¨ç¤ºGaussianç‚¹

### 1D â†’ 3Dï¼Ÿ

å‰ç½®çŸ¥è¯†ï¼š
* [å¤šå…ƒæ­£æ€åˆ†å¸ƒ](../æ•°å­¦/å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ.md)

è®ºæ–‡åŸæ–‡å¯¹3Dé«˜æ–¯ï¼ˆ3D Gaussiansï¼‰çš„å®šä¹‰ä¸å¤ªç›´è§‚ï¼Œç¬”è€…è®¡åˆ’ä»é«˜ï¼ˆä¸­ï¼‰æ•°ï¼ˆå­¦ï¼‰è§’åº¦å¼€å§‹æ¢³ç†ã€‚1Dé«˜æ–¯å³æ­£æ€åˆ†å¸ƒï¼š

$$N_{\mu ,\sigma}\left( x \right) =\frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{\left( x-\mu \right) ^2}{2\sigma ^2}}$$

å…¶å›¾åƒä¸ºä¸€ä¸ªå•é’Ÿå½¢å¯¹ç§°æ›²çº¿ï¼Œå‡å€¼$\mu$æ§åˆ¶å¯¹ç§°è½´è¿›è€Œæ§åˆ¶å›¾å½¢ä½ç½®ï¼Œæ ‡å‡†å·®$\sigma$æ§åˆ¶å¯†åº¦é›†ä¸­ç¨‹åº¦ã€‚å¯¹ä¸€æ®µ$x$åŒºé—´è¿›è¡Œç§¯åˆ†å¯ä»¥å¾—åˆ°åˆ†å¸ƒä¸­çš„æ•°æ®è½åœ¨è¿™ä¸€åŒºé—´çš„æ¦‚ç‡ï¼Œå…¶ä¸­ç»å¤§å¤šæ•°è½åœ¨$\left[ \mu -3\sigma ,\mu +3\sigma \right]$ï¼ˆæ¦‚ç‡ï¼š0.9974ï¼‰ã€‚

ä»å…¶å½¢å¼å¯çŸ¥ï¼Œé«˜æ–¯åˆ†å¸ƒåªæœ‰ä¸¤ä¸ªå‚æ•°$\mu,\sigma$ï¼Œæ‰€ä»¥ä¸€ç»„$\mu,\sigma$å¯ä»¥ç¡®å®šä¸€ä¸ª1Dé«˜æ–¯åˆ†å¸ƒå‡½æ•°ï¼Œè¿›è€Œå¯¹åº”ä¸€æ¡1Dçº¿æ®µ$\left[ \mu -3\sigma ,\mu +3\sigma \right]$ï¼Œå…¶ä½ç½®å†³å®šäº$\mu$ã€é•¿åº¦å†³å®šäº$\sigma$ï¼Œé€šè¿‡æ”¹å˜$\mu,\sigma$å¯ä»¥è¡¨è¾¾1Dæ•°è½´ä¸Šä¸åŒä½ç½®å’Œé•¿åº¦çš„çº¿æ®µã€‚

åŒæ ·çš„æ€æƒ³ï¼ŒäºŒç»´é«˜æ–¯åˆ†å¸ƒçš„å›¾å½¢æ˜¯ä¸€ä¸ªæ¤­åœ†ï¼Œä¸‰ç»´é«˜æ–¯åˆ†å¸ƒçš„å›¾å½¢æ˜¯ä¸€ä¸ª**æ¤­çƒ**ï¼Œè¿™ä¸ªæ¤­çƒåˆ†åˆ«ä»¥xyzè½´å¯¹ç§°ã€‚æ¦‚ç‡è®ºä¸­å­¦çš„ä¸‰å…ƒæ­£æ€åˆ†å¸ƒå‡½æ•°é€šå¸¸å†™æˆï¼š

$$N_{\mu _x,\sigma _x,\mu _y,\sigma _y,\mu _z,\sigma _z}\left( x,y,z \right) =\frac{1}{\sqrt{2\pi} ^3\sigma _x\sigma _y\sigma _z}\exp \left( -\frac{\left( x-\mu _x \right) ^2}{2{\sigma _x}^2}-\frac{\left( y-\mu _y \right) ^2}{2{\sigma _y}^2}-\frac{\left( z-\mu _z \right) ^2}{2{\sigma _z}^2} \right)$$

è¿™ä¸ªå½¢å¼å…¶å®æ˜¯è¿™ä¸‰ä¸ªå˜é‡ä¸º**äº’ä¸ç›¸å…³çš„ç‹¬ç«‹å˜é‡**ä¸”**æ¤­çƒçš„åæ ‡ç³»å’Œä¸–ç•Œåæ ‡ç³»å¹³è¡Œ**çš„æƒ…å†µã€‚
ä½†åœ¨æœ¬æ–‡ä¸­çš„3D Gaussianç‚¹å¯ä»¥æ—‹è½¬ï¼Œæ‰€ä»¥å®ƒçš„å¯¹ç§°è½´ï¼ˆåæ–‡ç§°ä¸º **æ¨¡å‹åæ ‡ç³»** ï¼‰ä¸ä¸€å®šå’Œä¸–ç•Œåæ ‡ç³»é‡å ï¼Œ
å¤ä¹ [å¤šå…ƒæ­£æ€åˆ†å¸ƒ](../æ•°å­¦/å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ.md)ä¸­çš„çŸ¥è¯†å¯ä»¥å›å¿†èµ·æ¥ï¼Œå¯¹ç§°è½´ä¸å’Œä¸–ç•Œåæ ‡ç³»é‡å çš„å¤šå…ƒæ­£æ€åˆ†å¸ƒæ„å‘³ç€å„éšæœºå˜é‡ç›¸äº’ä¹‹é—´å¹¶ä¸æ˜¯ç‹¬ç«‹å˜é‡ã€‚

### 3D Gaussianç‚¹æ€æƒ³æ¥æº

é¦–å…ˆå¤ä¹ [å¤šå…ƒæ­£æ€åˆ†å¸ƒ](../æ•°å­¦/å¤šå…ƒé«˜æ–¯åˆ†å¸ƒ.md)è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š

$$p(x_1, \cdots, x_n) = \frac{1}{(2 \pi)^{\frac{n}{2}} \left| \Sigma \right|^{\frac{1}{2}}} \cdot e^{-\frac{1}{2} \cdot [(\vec{X} - \vec{\mu})^\top \Sigma^{-1}(\vec{X} - \vec{\mu})]}$$

ä¸‰ç»´çš„æƒ…å†µï¼Œç”¨$\bm x=[x,y,z]^T$è¡¨ç¤ºä¸‰ç»´ç©ºé—´ä¸­çš„åæ ‡ï¼š

$$p(\bm x) = \frac{1}{\sqrt{2\pi}^3\det(\Sigma)} \cdot e^{-\frac{1}{2}(\bm x - \bm\mu)^T \Sigma^{-1}(\bm x - \bm\mu)}$$

æ­¤æ—¶åæ–¹å·®çŸ©é˜µ$\Sigma$ä¸ºï¼š

$$\Sigma=
\left[ \begin{matrix} 
	\sigma _{x}^{2}&		\mathrm{Cov}\left( x,y \right)&		\mathrm{Cov}\left( x,z \right)\\
 	\mathrm{Cov}\left( y,x \right)&		\sigma _{y}^{2}&		\mathrm{Cov}\left( y,z \right)\\
 	\mathrm{Cov}\left( z,x \right)&		\mathrm{Cov}\left( z,y \right)&		\sigma _{z}^{2}\\
\end{matrix} \right]$$

### â€œ3D Gaussiansâ€ 3D Gaussianç‚¹

å°±åƒç»™3ä¸ªé¡¶ç‚¹èƒ½è¡¨è¾¾ä»»æ„ä¸€ä¸ª3Dä¸‰è§’å½¢ï¼Œç ”ç©¶è€…è‡ªç„¶å¸Œæœ›æ„ç­‘çš„åŸºç¡€å…ƒç´ èƒ½è¦†ç›–è¶³å¤Ÿå¤šæ ·çš„å‡ ä½•ï¼Œè€Œå¤šå…ƒæ­£æ€åˆ†å¸ƒèƒ½æ¶µç›–ç©ºé—´ä¸­ä»»æ„å½¢çŠ¶ï¼ˆæ¤­çƒçš„ä¸‰ä¸ªè½´é•¿ï¼‰ä»»æ„ä½å§¿ï¼ˆåŒ…æ‹¬å¹³ç§»æ—‹è½¬ï¼‰çš„æ¤­çƒï¼š

$$G_s\left(\bm x \right) = \frac{1}{\sqrt{2\pi}^3\det(\Sigma)} \cdot e^{-\frac{1}{2}(\bm x - \bm\mu)^T \Sigma^{-1}(\bm x - \bm\mu)}$$

å…¶ä¸­$\bm\mu$æ˜¯æ¤­çƒä¸­å¿ƒï¼ˆæ§åˆ¶ä¸–ç•Œç©ºé—´ä½ç½®å¹³ç§»ï¼‰ï¼Œåæ–¹å·®çŸ©é˜µ$\Sigma$æ§åˆ¶æ¤­çƒåœ¨3è½´å‘çš„ä¼¸ç¼©å’Œæ—‹è½¬ï¼ˆæ¨¡å‹åæ ‡ç³»ï¼‰ï¼Œåæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å‘é‡å°±æ˜¯æ¤­çƒå¯¹ç§°è½´ã€‚

æ³¨ï¼šåœ¨æ•°å­¦ä¸Šæ¯ä¸ªé«˜æ–¯åˆ†å¸ƒéƒ½è¦†ç›–æ•´ä¸ªç©ºé—´ï¼Œå½“å®ƒæ˜¯æ¤­çƒæ˜¯å› ä¸ºå®ƒçš„ç­‰é«˜çº¿æ˜¯æ¤­çƒã€‚è®¡ç®—çš„æ—¶å€™æ˜¾ç„¶ä¸èƒ½æ¯ä¸ªåƒç´ ç‚¹ä¸Šå¯¹æ¯ä¸ªé«˜æ–¯ç‚¹éƒ½é‡‡ä¸ªæ ·ï¼Œæ‰€ä»¥å®é™…ä½¿ç”¨ä¸­ä¼šæŠŠè·ç¦»ä¸­å¿ƒè¾ƒè¿œçš„åœ°æ–¹æˆªæ‰ï¼ˆæœ¬æ–‡æ˜¯åœ¨æ¦‚ç‡ç§¯åˆ†$99\%$çš„ç­‰é«˜çº¿æˆªï¼‰ï¼Œæˆªäº†å°±çœ‹ç€æ˜¯ä¸€ä¸ªä¸­å¿ƒé€æ˜åº¦é«˜å‘¨å›´é€æ˜åº¦ä½çš„æ¤­çƒã€‚

è®ºæ–‡ä¸­åˆ™æ˜¯è¿™æ ·å®šä¹‰ï¼š

$$G\left(\bm x \right) =e^{-\frac{1}{2}\left(\bm x \right) ^T\Sigma ^{-1}\left(\bm x \right)}$$

å’Œæ ‡å‡†å½¢å¼å¯¹æ¯”å¯ä»¥çœ‹åˆ°ï¼š
* é»˜è®¤æ¨¡å‹åæ ‡ä¸­å¿ƒåœ¨åæ ‡ç³»åŸç‚¹ï¼Œæ–¹ä¾¿æ—‹è½¬æ”¾ç¼©ï¼Œæ”¾å…¥ä¸–ç•Œåæ ‡ç³»æ—¶å†åŠ ä¸Šå¹³ç§»
* å»æ‰äº†æŒ‡æ•°éƒ¨åˆ†å‰é¢çš„å°ºåº¦ç³»æ•°ï¼Œæ‰€ä»¥åœ¨ç©ºé—´ä¸Šçš„ç§¯åˆ†ä¸ä¸º1ï¼Œè€Œæ˜¯åœ¨$\bm x=[0,0,0]^T$å¤„å€¼ç­‰äº1ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªä¸­é—´ä¸é€æ˜ï¼ˆ$G\left(\bm x \right)$å€¼ä¸º1ï¼‰ï¼Œè¶Šå¾€å››å‘¨è¶Šé€æ˜çš„æ¤­çƒã€‚
  * è®ºæ–‡ä¸­ç”¨ä¸€ä¸ªä¸é€æ˜åº¦å€¼$\alpha$æ§åˆ¶Gaussianç‚¹æ•´ä½“çš„é€æ˜åº¦ï¼Œå¯ä»¥è®©Gaussianç‚¹ä¸­é—´ä¹Ÿé€æ˜

### å¦‚ä½•è¡¨ç¤ºGaussianç‚¹çš„é¢œè‰²

ç”¨[çƒè°ç³»æ•°](./çƒè°ç³»æ•°.md)æ¥è¡¨ç¤ºæ¯ä¸ªé«˜æ–¯çš„é¢œè‰² ï¼Œä¸åŒè§†è§’é¢œè‰²ä¸åŒã€‚

## å¦‚ä½•æ¸²æŸ“Gaussianç‚¹

æ¸²æŸ“Gaussianç‚¹å°±æ˜¯æŒ‰ç…§ç›¸æœºä½ç½®å°†3D Gaussianç‚¹å˜æ¢åˆ°æˆåƒå¹³é¢ä¸Šã€‚

æ¯”è¾ƒå¤æ‚ï¼Œéœ€å­¦ä¹ [ã€Š3D Gaussian Splattingä¸­çš„æ•°å­¦æ¨å¯¼ã€‹](./3Dé«˜æ–¯æ•°å­¦æ¨å¯¼.md)å’Œè®ºæ–‡
Matthias Zwicker, Hanspeter Pfister, Jeroen Van Baar, and Markus Gross. 2001a. **EWA volume splatting**. *In Proceedings Visualization*, 2001. VISâ€™01. IEEE, 29â€“538.

## å¦‚ä½•è®­ç»ƒGaussianç‚¹

### å¦‚ä½•è®­ç»ƒGaussianç‚¹å‚æ•°

æŒ‰ç…§è®ºæ–‡ä¸­çš„å®šä¹‰ï¼ŒGaussianç‚¹çš„å‚æ•°åªæœ‰$\Sigma$ï¼Œå…¶å†³å®šäº†æ¤­çƒçš„å½¢çŠ¶å’Œå¯¹ç§°è½´æ–¹å‘ï¼Œä¸å†³å®šæ¤­çƒçš„ä½ç½®ã€‚
æ¤­çƒçš„ä½ç½®æœ‰å¦å¤–çš„è®­ç»ƒæ–¹æ³•ã€‚

è®­ç»ƒè¿‡ç¨‹å°±æ˜¯ç”¨æ¸²æŸ“å›¾å’ŒåŸå›¾æ¯”è¾ƒè®¡ç®—è§†é‡ä¸­é«˜æ–¯ç‚¹çš„çŸ©é˜µ$\Sigma$çš„æ¢¯åº¦ï¼Œç„¶åæ¢¯åº¦ä¸‹é™è°ƒ$\Sigma$ã€‚

å…¶æ¢¯åº¦è®¡ç®—åŸç†æ¯”è¾ƒå¤æ‚ï¼Œéœ€å­¦ä¹ [ã€Š3D Gaussian Splattingä¸­çš„æ•°å­¦æ¨å¯¼ã€‹](./3Dé«˜æ–¯æ•°å­¦æ¨å¯¼.md)ï¼Œç›¸å…³æ–¹æ³•ä¸»è¦æ¥è‡ªäºè®ºæ–‡
Matthias Zwicker, Hanspeter Pfister, Jeroen Van Baar, and Markus Gross. 2001a. **EWA volume splatting**. *In Proceedings Visualization*, 2001. VISâ€™01. IEEE, 29â€“538.

### å¦‚ä½•è®­ç»ƒGaussianç‚¹ä½ç½®

æ–‡ä¸­åªæäº†ä¸€å˜´â€œä½ç½®æ¢¯åº¦â€ä½†æ˜¯æ²¡æœ‰ç»†è®²ï¼Œä¸çŸ¥é“å…·ä½“ä»€ä¹ˆå®ç°ã€‚
ä½†æ˜¯å¯ä»¥å‚è€ƒå¦ä¸€ç¯‡åŸºäºEWA Splattingçš„æ–‡ç« ã€ŠDifferentiable surface splatting for point-based geometry processingã€‹ã€‚å…·ä½“è§åæ–‡å¯¹è¿™ç¯‡æ–‡ç« çš„è§£è¯»ã€‚

### å¦‚ä½•å¢åŠ Gaussianç‚¹

![](i/20231218204732.png)

éœ€è¦å¢åŠ Gaussianç‚¹çš„åŒºåŸŸåˆ†ä¸¤ç§ï¼š

* â€œæ¬ é‡æ„åŒºâ€(under-reconstruction)ï¼šç¼ºå°‘Gaussianç‚¹çš„åŒºåŸŸ
* â€œè¿‡é‡æ„åŒºâ€(over-reconstruction)ï¼šæ¯ä¸ªGaussianç‚¹è¦†ç›–å¾ˆå¤§èŒƒå›´çš„åŒºåŸŸ

å¯»æ‰¾è¿™äº›åŒºåŸŸï¼š

* â€œæ¬ é‡æ„åŒºâ€(under-reconstruction)ï¼šä½ç½®æ¢¯åº¦å¾ˆå¤§ä½†å€¼å¾ˆå°çš„Gaussianç‚¹
* â€œè¿‡é‡æ„åŒºâ€(over-reconstruction)ï¼šä½ç½®æ¢¯åº¦å¾ˆå¤§ä¸”å€¼å¾ˆå¤§çš„Gaussianç‚¹

å¢åŠ Gaussianç‚¹ï¼š

* â€œæ¬ é‡æ„åŒºâ€(under-reconstruction)ï¼šå¤åˆ¶è¿™ä¸ªGaussianç‚¹ï¼Œå†æ²¿ä½ç½®æ¢¯åº¦è¿›è¡Œç§»åŠ¨
* â€œè¿‡é‡æ„åŒºâ€(over-reconstruction)ï¼šå‡å°è¿™ä¸ªGaussianç‚¹çš„å€¼ï¼Œå†å¤åˆ¶è¿™ä¸ªGaussianç‚¹ï¼Œå†æ²¿ä½ç½®æ¢¯åº¦è¿›è¡Œç§»åŠ¨

### å¦‚ä½•å‡å°‘Gaussianç‚¹

å‡å°‘Gaussianç‚¹ä¸»è¦æ˜¯ä¸ºäº†ï¼š

* åˆ é™¤ä¸é‡è¦çš„Gaussianç‚¹ä»¥å‡å°è®¡ç®—é‡
* åº”å¯¹ç›¸æœºé¢å‰çš„é”™è¯¯ç‚¹(floaters close to the input cameras)

å‡å°‘Gaussianç‚¹çš„æ–¹æ³•ï¼š

* åˆ é™¤ä¸é‡è¦çš„Gaussianç‚¹ä»¥å‡å°è®¡ç®—é‡ï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¼šæœ‰ä¸€äº›Gaussianç‚¹çš„é€æ˜åº¦ä¸æ–­ä¸‹é™åˆ°å°äºç»™å®šé˜ˆå€¼ï¼Œè¿™äº›Gaussianç‚¹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åˆ é™¤
* åº”å¯¹ç›¸æœºé¢å‰çš„é”™è¯¯ç‚¹ï¼š
  1. æ¯éš”ä¸€æ®µæ—¶é—´å°±å°†æ‰€æœ‰Gaussianç‚¹çš„é€æ˜åº¦è®¾ä¸º0
  2. ç¦ç”¨ç‚¹çš„å¢å‡å’Œç§»åŠ¨åŠŸèƒ½ï¼Œä»…å¯¹Gaussianç‚¹çš„å‚æ•°è¿›è¡Œä¸€æ®µæ—¶é—´è®­ç»ƒ
     * æœ‰äº›Gaussianç‚¹ä¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å˜å¤§ï¼Œç›–ä½å…¶ä»–ç‚¹æˆ–è€…ç›–ä½ç›¸æœºï¼Œåˆ é™¤è¿™äº›ç‚¹
  3. è®­ç»ƒå®Œæˆåä¼šæœ‰ä¸€äº›Gaussianç‚¹é€æ˜åº¦ä»ç„¶æ¥è¿‘0ï¼Œåˆ é™¤è¿™äº›ç‚¹

#### ç›¸æœºé¢å‰çš„é”™è¯¯ç‚¹(floaters close to the input cameras)æ˜¯ä»€ä¹ˆ

ç†è®ºä¸Šè®²ï¼Œåœ¨æ¯ä¸ªè¾“å…¥è§†è§’é¢å‰æ‘†ä¸Šè¾“å…¥å›¾ç‰‡ï¼Œå°±å¯ä»¥è®©NeRFè®­ç»ƒè¯¯å·®é™åˆ°0ã€‚
è¿™ä¹Ÿæ˜¯NeRFçš„ä¸€ç§è¿‡æ‹Ÿåˆï¼Œæ­£å› ä¸ºå¦‚æ­¤ï¼ŒNeRFåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¼šæœ‰æ¦‚ç‡åœ¨è¾“å…¥è§†è§’é™„è¿‘è®­ç»ƒå‡ºä¸€äº›é”™è¯¯ç‚¹ã€‚
å°¤å…¶æ˜¯åœ¨ç›¸æœºå‚æ•°çš„æœ‰è¯¯å·®çš„æ—¶å€™ï¼Œè¾“å…¥å›¾åƒä¸Šçš„æŸäº›ç‚¹æ—¶æ— è§£çš„ï¼Œè¿™æ˜¯å¦‚æœç”¨DNNè¾ƒå¤§çš„NeRFè¿›è¡Œè¿‡åº¦çš„è®­ç»ƒï¼ŒNeRFä¸ç®¡æ€ä¹ˆæ ·éƒ½æ²¡æ³•åœ¨åœºæ™¯ä¸­æ‰¾åˆ°æŸäº›ç‚¹çš„æœ€ä¼˜è§£ï¼Œå°±ä¼šå°†ç‚¹æ”¾åœ¨ç›¸æœºé¢å‰ã€‚

## Gaussianç‚¹ â†’ Gaussianç‚¹äº‘

### forward pass: Gaussianç‚¹äº‘å¿«é€Ÿå…‰æ …åŒ–æ–¹æ³•

æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸºäºç”»å®¶ç®—æ³•çš„$\alpha$-Blendingã€‚æœ¬æ–‡æ‰€ç”¨çš„$\alpha$-Blendingå…¬å¼æ˜¯ï¼š

![](i/20231225172335.png)

å‰ç½®çŸ¥è¯†ï¼š
* [å…‰æ …åŒ– Rasterization](./æŠ•å½±å’Œå…‰æ …åŒ–.md)
* [$\alpha$-Blending](./alpha-blending.md)

å…·ä½“è¿‡ç¨‹ï¼š

1. å°†å±å¹•åˆ’åˆ†ä¸º16x16çš„tilesï¼ˆå¯¹äºGaussianç‚¹æ¥è¯´å°±æ˜¯binsï¼‰
2. è®¡ç®—æ¯ä¸ªGaussianç‚¹æ‰€å¤„çš„tileså’Œç›¸å¯¹è§†å¹³é¢çš„æ·±åº¦
3. æ ¹æ®Gaussianç‚¹ç›¸äº¤çš„tileså’Œæ·±åº¦å¯¹æ‰€æœ‰Gaussianç‚¹è¿›è¡Œæ’åº
   * æ’åºæ–¹æ³•ï¼šGPU Radix sortï¼Œæ¯ä¸ªbinsé‡ŒæŒ‰Gaussianç‚¹æ·±åº¦è¿›è¡Œæ’åº
   * æ’åºå®Œæˆåï¼Œæ¯ä¸ªtileéƒ½æœ‰ä¸€ä¸ªlist(bins of Gaussianç‚¹)ï¼Œå’Œè¿™ä¸ªtileç›¸äº¤çš„æ‰€æœ‰Gaussianç‚¹åœ¨è¿™ä¸ªlisté‡Œé¢ä»è¿‘åˆ°è¿œä¾æ¬¡å­˜æ”¾
4. ç»™æ¯ä¸ªtileåœ¨GPUé‡Œå¼€ä¸€ä¸ªthread blockï¼Œå°†tileå¯¹åº”çš„liståŠ è½½è¿›blockçš„shared memoryé‡Œ
5. thread blockä¸­çš„æ¯ä¸ªthreadå¯¹åº”tileä¸­çš„ä¸€ä¸ªåƒç´ ï¼Œæ‰§è¡Œ$\alpha$-Blending
   1. è®¡ç®—listé‡Œä¸‹ä¸€ä¸ªé«˜æ–¯ç‚¹åœ¨å½“å‰åƒç´ æŠ•å½±å‡ºçš„é¢œè‰²å’Œ$\alpha$å€¼ï¼ˆå¾ˆæ˜¾ç„¶è¿™æ ·æ— æ³•å¤„ç†ä¸¤ä¸ªé«˜æ–¯ç‚¹ç›¸äº¤çš„æƒ…å†µï¼Œæ‰€ä»¥ä½œè€…å¼ºè°ƒäº†è¿™ä¸ª$\alpha$-Blendingæ˜¯approximateçš„ï¼‰
   2. å°†é¢œè‰²ä¸[frame buffer](./æŠ•å½±å’Œå…‰æ …åŒ–.md)ä¸­çš„é¢œè‰²æ··åˆ
   3. å°†$\alpha$ä¸é€æ˜åº¦bufferä¸­çš„é€æ˜åº¦å€¼ç›¸åŠ 
   4. å¦‚æœé€æ˜åº¦å€¼å¤§äºé˜ˆå€¼åˆ™é€€å‡ºè®¡ç®—ï¼Œå¦åˆ™å›åˆ°æ­¥éª¤1

![](i/20231225163903.png)

### backward pass: Gaussianç‚¹äº‘å…‰æ …åŒ–è¿‡ç¨‹å¦‚ä½•æ±‚å¾®åˆ†

* é—®é¢˜æè¿°ï¼šå·²çŸ¥æŸä¸ªåƒç´ ä¸ground-truthä¹‹é—´çš„lossï¼Œå¦‚ä½•æ±‚ç›¸å…³Gaussianç‚¹çš„å¾®åˆ†ï¼Ÿ
* è§£å†³æ€è·¯ï¼šæ ¹æ®ä¸Šè¿°å…‰æ …åŒ–æ–¹æ³•å¯çŸ¥ï¼Œåƒç´ çš„å€¼æ˜¯å¤šä¸ªé«˜æ–¯ç‚¹çš„å€¼çš„åŠ æƒå¹³å‡ï¼Œæ‰€ä»¥æ±‚ç›¸å…³Gaussianç‚¹çš„å¾®åˆ†å°±æ˜¯æŠŠlosså€¼æŒ‰ç…§åŠ æƒå¹³å‡æ—¶çš„æƒå€¼åˆ†é…ç»™è¿™äº›Gaussianç‚¹ã€‚

æ‰€ä»¥ï¼Œåªè¦çŸ¥é“åƒç´ çš„losså’Œåœ¨forward passæ—¶å„Gaussianç‚¹çš„æƒå€¼å°±èƒ½è®¡ç®—å‡ºå„é«˜æ–¯ç‚¹çš„å¾®åˆ†äº†ã€‚

å…·ä½“è¿‡ç¨‹ï¼š

1. åœ¨å…‰æ …åŒ–Gaussianç‚¹æ—¶ï¼Œæ¯ä¸ªåƒç´ è®¡ç®—å®Œæˆåéƒ½è®°å½•ä¸‹æœ€ç»ˆçš„$\alpha$å€¼å’Œæœ€åä¸€ä¸ªæœ‰ç”¨çš„Gaussianç‚¹åœ¨listä¸­çš„ä½ç½®
2. å¯¹æ¯ä¸ªåƒç´ ï¼Œä»å…¶å¯¹åº”çš„listçš„æœ€åä¸€ä¸ªGaussianç‚¹å¼€å§‹éå†ï¼Œå¯¹ä¹‹å‰è®°å½•çš„æœ€ç»ˆçš„$\alpha$å€¼è¿›è¡Œåˆ†è§£ï¼Œä»è€Œå¾—åˆ°å½“å‰åƒç´ çš„lossè¯¥ç»™æ¯ä¸ªGaussianç‚¹åˆ†é…å¤šå°‘

TBD: ä¸ºä»€ä¹ˆè¦ä»æœ€åä¸€ä¸ªGaussianç‚¹å¼€å§‹éå†ï¼ŸæŒ‰ç†è¯´æœ€åä¸€ä¸ªGaussianç‚¹çš„å…‰çº¿ç©¿è¿‡å‰é¢çš„Gaussianç‚¹ä¼šæœ‰è¡°å‡ï¼Œè¡°å‡å¤šå°‘åº”è¯¥æ˜¯ç”±å‰é¢çš„Gaussianç‚¹çš„$\alpha$å†³å®šçš„å•Šï¼Ÿ

ä¸ºä»€ä¹ˆè¦è®°å½•æœ€ç»ˆçš„$\alpha$å€¼ï¼Ÿå› ä¸ºä¸æ˜¯æ¯ä¸ªåƒç´ éƒ½ä¼šåœ¨$\alpha\rightarrow 1$æ—¶åœä¸‹ï¼Œæœ‰äº›æ–¹å‘å¯èƒ½Gaussianç‚¹å°‘æˆ–è€…é€æ˜çš„ç‚¹å¤ªå¤šï¼Œæ‰€æœ‰Gaussianç‚¹ç®—å®Œäº†éƒ½æ²¡æ³•$\alpha=1$ã€‚

## ç±»ä¼¼å·¥ä½œï¼š(2019 ACM Trans. Graph.) Differentiable surface splatting for point-based geometry processing

3D Gaussian Splattingæ–‡ä¸­åªæäº†ä¸€å˜´â€œä½ç½®æ¢¯åº¦â€ä½†æ˜¯æ²¡æœ‰ç»†è®²ï¼Œä¸çŸ¥é“å…·ä½“ä»€ä¹ˆå®ç°ã€‚
ä½†æ˜¯å¯ä»¥å‚è€ƒå¦ä¸€ç¯‡åŸºäºEWA Splattingçš„æ–‡ç« ã€ŠDifferentiable surface splatting for point-based geometry processingã€‹ï¼Œè¿™ç¯‡æ–‡ç« å’Œ3D Gaussian Splattingéå¸¸ç›¸ä¼¼ï¼Œå‡ ä¹å°±æ˜¯ç¼ºäº†å„å‘å¼‚æ€§å’Œ$\alpha$çš„3D Gaussian Splattingã€‚

### å¦‚ä½•å®šä¹‰Gaussianç‚¹

å’Œ3D Gaussian Splattingä¸€æ ·éƒ½æ˜¯ä¸‰ç»´æ­£æ€åˆ†å¸ƒï¼š

$$G_s\left(\bm x \right) = \frac{1}{\sqrt{2\pi}^3\det(\Sigma)} \cdot e^{-\frac{1}{2}(\bm x - \bm\mu)^T \Sigma^{-1}(\bm x - \bm\mu)}$$

å”¯ä¸€çš„ä¸åŒæ˜¯æœ¬æ–‡æ²¡æœ‰æŠŠè¿™å…¬å¼æ”¹æˆ$G\left(\bm x \right) =e^{-\frac{1}{2}\left(\bm x \right) ^T\Sigma ^{-1}\left(\bm x \right)}$ï¼Œè¿™æ„å‘³ç€æœ¬æ–‡ä¸­çš„é«˜æ–¯ç‚¹çš„ä½ç½®å’Œæ—‹è½¬éƒ½æ˜¯ç›´æ¥ç”±$\Sigma$ï¼ˆåœ¨æ–‡ä¸­æ˜¯$\bm J_k$ï¼‰å†³å®šçš„ï¼Œæ²¡æœ‰è¯´è¦ç‹¬ç«‹å‡ºæ¥ã€‚ä½†æ˜¯æ–‡ä¸­ä¹Ÿè¯´äº†$\bm J_k$ç”±é«˜æ–¯ç‚¹ä½ç½®$\bm p_k$å’Œæ³•å‘é‡$\bm n_k$å†³å®šï¼Œæ±‚æ¢¯åº¦çš„æ—¶å€™ä¹Ÿæ˜¯é’ˆå¯¹$\bm p_k$å’Œ$\bm n_k$åœ¨æ“ä½œã€‚

### å¦‚ä½•æ¸²æŸ“Gaussianç‚¹

å…·ä½“æ¥è¯´ï¼Œè¿™ç¯‡æ–‡ç« å°†å›¾åƒä¸Šåƒç´ $\bm x$å¤„çš„è®¡ç®—ç»“æœå®šä¹‰ä¸º$\mathbb I_{\bm x}$ï¼š

$$\mathbb I_{\bm x}=\frac{\sum_{k=0}^{N-1}\rho_k(\bm x)\bm w_k}{\sum_{k=0}^{N-1}\rho_k(\bm x)}$$

å…¶ä¸­ï¼Œ$w_k$ä¸ºé«˜æ–¯ç‚¹$k$çš„Attributesï¼Œå¯ä»¥æ˜¯é¢œè‰²ï¼›$\rho_k(\bm x)$æ˜¯é«˜æ–¯ç‚¹$k$åœ¨åƒç´ $\bm x$å¤„çš„æ¦‚ç‡å¯†åº¦å€¼ã€‚
æ‰€ä»¥è¿™ä¸ª$\mathbb I_{\bm x}$å…¬å¼å…¶å®å°±æ˜¯ç®€åŒ–ç‰ˆçš„Gaussian Splattingï¼Œæ¯”ä¸Šé¢è®²çš„Gaussian Splattingå°‘äº†åŸºäºçƒè°ç³»æ•°çš„å„å‘å¼‚æ€§å’Œé€æ˜åº¦$\alpha$ã€‚æƒ³æƒ³ä¹ŸæŒºç¬¦åˆè¿™ä¸ªæ–‡ç« æ ‡é¢˜â€œsurface splattingâ€ï¼Œåªç®¡æ„å»ºè¡¨é¢ä¸ç®¡é«˜æ–¯ç‚¹ä¸­å¿ƒè¦ä¸è¦åŠé€æ˜ã€‚

å›åˆ°ä¸Šé¢é‚£ä¸ªå…¬å¼ï¼Œå…¶ä¸­çš„$\rho_k(\bm x)$è¡¨è¾¾å¼å¦‚ä¸‹ï¼š

$$
\rho_k(\bm x)=
\left\{
\begin{aligned}
    &0&&\text{if }\frac{1}{2}\bm x^T(\bm J\bm V_k\bm J)\bm x>\mathcal C\\
    &0&&\text{if }\bm p_{k}\text{ is occluded}\\
    &\bar\rho_k(\bm x)&&\text{otherwise}
\end{aligned}
\right.
$$

ä»å…¬å¼é‡Œçœ‹å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ª$\frac{1}{2}\bm x^T(\bm J\bm V_k\bm J)\bm x>\mathcal C$å°±æ˜¯å’ŒGaussian Splattingä¸€æ ·æŠŠé«˜æ–¯åˆ†å¸ƒè¾ƒè¿œçš„åœ°æ–¹æˆªæ‰ï¼Œæ­¤å¤–ä¹Ÿä¸€æ ·è€ƒè™‘äº†é«˜æ–¯ç‚¹çš„é¡ºåºå’Œé®æŒ¡ã€‚æ–‡ä¸­æåˆ°é®æŒ¡åˆ¤æ–­çš„æ¡ä»¶å¾ˆç®€å•ï¼Œå°±æ˜¯å¯¹æ¯ä¸ªåƒç´ åªæ±‚æœ€è¿‘çš„5ä¸ªé«˜æ–¯ç‚¹ï¼Œ$\mathbb I_{\bm x}$å…¬å¼é‡Œçš„$N=5$ã€‚

### å¦‚ä½•è®­ç»ƒGaussianç‚¹ä½ç½®

ä½œè€…å…ˆä»ä¸€ç»´çš„æƒ…å†µå¼€å§‹è§£é‡Šï¼Œç„¶åæ‰©å±•åˆ°ä¸‰ç»´çš„æƒ…å†µã€‚

#### ä¸€ç»´çš„åœºæ™¯

åŸºæœ¬æ€æƒ³æ˜¯ç”¨æ­£æ€åˆ†å¸ƒä¸­å¿ƒ$\bm p_{k,0}$åˆ°åƒç´ ä¸­å¿ƒ$\bm q_x$å’Œè¾¹ç•Œä¹‹é—´çš„è·ç¦»å’Œåƒç´ å€¼$\Phi_{\bm x}$ï¼ˆå’Œ$\mathbb I_x$ä¸€ä¸ªæ„æ€ï¼‰çš„æ¯”å€¼å®šä¹‰ä½ç½®æ¢¯åº¦ï¼š

![](i/20231229203751.png)

ä»å›¾ä¸Šå°±èƒ½çœ‹ä¸ªå¤§æ¦‚ï¼Œå…¶å®å°±æ˜¯ä»¥â€œé«˜æ–¯ç‚¹ä¸­å¿ƒåƒç´ ä¸­å¿ƒè¶Šè¿œå€¼è¶Šå°â€ä¸ºåŸºç¡€çš„â€œå¯å‘å¼â€æ¢¯åº¦ğŸ˜€

å…·ä½“ç‚¹ï¼Œä¸­å¿ƒåœ¨$\bm p_{k,0}$çš„é«˜æ–¯ç‚¹çš„å¯¹åƒç´ $\bm x$ä½ç½®æ¢¯åº¦å®šä¹‰ä¸ºï¼š

$$
\left.\frac{d\Phi_{\bm x}}{d\bm p_{k,0}}\right\vert_{\bm p_{k,0}}=
\left\{
\begin{aligned}
    &\frac{\Delta\mathbb I_x}{\left\|\Delta\bm p_k^+\right\|+\epsilon}\Delta\bm p_k^+&&\bm p_k\text{ invisible at }\bm x\\
    &\frac{\Delta\mathbb I_x}{\left\|\Delta\bm p_k^+\right\|+\epsilon}\Delta\bm p_k^++\frac{\Delta\mathbb I_x}{\left\|\Delta\bm p_k^-\right\|+\epsilon}\Delta\bm p_k^-&&\text{otherwise}\\
\end{aligned}
\right.
$$

å…¶ä¸­$\epsilon$é˜²æ­¢é™¤æ•°ä¸º0æ¢¯åº¦çˆ†ç‚¸ï¼Œ$\Delta\bm p_k^+$å’Œ$\Delta\bm p_k^-$åœ¨é«˜æ–¯ç‚¹å’Œåƒç´ ç›¸äº¤ä¸ä¸ç›¸äº¤æ—¶åˆ†åˆ«æœ‰ä¸åŒçš„è¡¨ç¤ºã€‚å¦‚ä¸Šå›¾ï¼š

* å¦‚ä¸Šå›¾å·¦æ‰€ç¤ºï¼Œé«˜æ–¯ç‚¹å’Œåƒç´ ä¸ç›¸äº¤æ—¶$\Delta\bm p_k^+=\mathbb I_x/\|\overrightarrow{\bm p_{k,0}\bm q_x}\|$ï¼Œ$\Delta\bm p_k^-=0$
* å¦‚ä¸Šå›¾å³æ‰€ç¤ºï¼Œé«˜æ–¯ç‚¹å’Œåƒç´ ç›¸äº¤æ—¶$\Delta\bm p_k^+$å’Œ$\Delta\bm p_k^-$åˆ†åˆ«æ˜¯$\mathbb I_x$é™¤é«˜æ–¯ç‚¹ä¸­å¿ƒå’Œåƒç´ å·¦ä¾§å’Œå³ä¾§çš„è·ç¦»

#### ä¸‰ç»´çš„åœºæ™¯

æ¨å¹¿åˆ°ä¸‰ç»´çš„åœºæ™¯ï¼Œå…¶å®å°±æ˜¯åŸºäºè¾“å‡ºçš„å›¾ç‰‡åœ¨xyä¸¤ä¸ªæ–¹å‘ä¸Šè®¡ç®—ä¸Šè¿°å€¼ã€‚ä»å®é™…å‡ºå‘ï¼Œä½œè€…è€ƒè™‘ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š

![](i/20231229222043.png)

* (a) é«˜æ–¯ç‚¹$k$æ²¡è¢«ä»»ä½•åƒç´ æ¸²æŸ“ï¼Œåƒç´ $\bm x$ä¹Ÿæ²¡æœ‰éœ€è¦æ¸²æŸ“çš„é«˜æ–¯ç‚¹
* (b) é«˜æ–¯ç‚¹$k$æ²¡è¢«ä»»ä½•åƒç´ æ¸²æŸ“ï¼Œåƒç´ $\bm x$è¢«å…¶ä»–é«˜æ–¯ç‚¹è¦†ç›–
  * $\bm p_k$ must move forward in order to become visible, resulting in a negative depth gradient.
  * ä¸ºä»€ä¹ˆï¼Ÿ
* (c) é«˜æ–¯ç‚¹$k$è¢«æŸä¸ªåƒç´ æ¸²æŸ“ï¼Œåƒç´ $\bm x$è¢«å…¶ä»–é«˜æ–¯ç‚¹è¦†ç›–
  * éœ€è¦æŠŠæ¢¯åº¦åˆ†ä¸¤ä»½ç»™ä¸¤ä¸ªé«˜æ–¯ç‚¹

æ–‡ä¸­æåˆ°è‡ªå·±çš„æ–¹æ³•å’ŒNMRã€ŠNeural 3d mesh rendererã€‹å¾ˆç±»ä¼¼ï¼Œè¦æ·±å…¥äº†è§£å¯ä»¥å†å»è¿™ç¯‡é‡Œçœ‹çœ‹

### Surface regularization

é€šè¿‡ä¸€äº›æ­£åˆ™åŒ–æ–¹æ³•é¿å…å±€éƒ¨æœ€ä¼˜ã€‚

* Repulsion term: is aimed at **generating uniform point distributions** by **maximizing the
distances between its neighbors on a local projection plane**
* Projection term: **preserves clean surfaces** by **minimizing the distance from the point to the surface tangent plane**

![](i/20231229223118.png)